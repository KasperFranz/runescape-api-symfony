{% extends 'base.html.twig' %}

{% block body %}
    <div class="container-fluid pt-3">
        <div class="row">
            <div class="col-12">
                <div class="card card-wrapper">
                    <div class="card-body main-card">
                        <div class="row">
                            <!-- Left Col -->
                            <div class="col-4 p2">
                                <!-- Player Info -->
                                <div class="row">
                                    <div class="col-12 p-2">
                                        <div class="card sub-card">
                                            <div class="card-header">
                                                <div class="avatar-container">
                                                    <div class="avatar-container-wrap">
                                                        <img src="https://secure.runescape.com/m=avatar-rs/{{ playerInfo.name }}/chat.png"
                                                             alt="{{ playerInfo.name }} avatar"
                                                             title="{{ playerInfo.name }} avatar"
                                                             class="avatar-img">
                                                    </div>
                                                </div>
                                                <h2>{{ playerInfo.name }}</h2>
                                            </div>
                                            <div class="card-body sub-card inner-card">
                                                <div class="list-group">
                                                    <div class="list-group-item list-group-item-action">
                                                        <div class="d-flex w-100 justify-content-between">
                                                            <h5 class="mb-0">Time played</h5>
                                                            <p class="mb-0 adventure-log-item-time">
                                                                630 days, 2 hours
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Activity -->
                                <div class="row">
                                    <div class="col-12 p-2">
                                        <div class="card sub-card">
                                            <div class="card-header">
                                                <h2>ACTIVITY</h2>
                                            </div>
                                            <div class="card-body sub-card inner-card">
                                                <div class="list-group">
                                                    {% for adventureLogItem in playerInfo.activities %}
                                                        <div class="list-group-item list-group-item-action">
                                                            <div class="d-flex w-100 justify-content-between">
                                                                <h5 class="mb-0">
                                                                    {% if adventureLogItem.text is not null and adventureLogItem.text is not empty %}
                                                                        {% if 'XP' in adventureLogItem.text %}
                                                                            {{ adventureLogItem.text|split('XP')|first|number_format }} XP{{ adventureLogItem.text|split('XP')|last|trim('.') }}
                                                                        {% else %}
                                                                            {{ adventureLogItem.text|trim('.') }}
                                                                        {% endif %}
                                                                    {% endif %}
                                                                </h5>
                                                            </div>
                                                            <p class="mb-0 adventure-log-item-time">
                                                                <small>
                                                                    <i class="fa-regular fa-clock"></i>
                                                                    {{ adventureLogItem.date|date('d-M-Y H:i') }}
                                                                </small>
                                                            </p>
                                                        </div>
                                                    {% endfor %}
                                                    <div class="list-group-item list-group-item-action adventure-log-item custom-card-footer">
                                                        <div class="d-flex w-100 justify-content-end">
                                                            <a href="{{ path('index') }}" class="mb-0 card-footer-link">
                                                                All activity
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                                {#                                        <p class="card-text">{{ render_chart(chart) }}</p> #}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Skills -->
                            <div class="col-4 p-2">
                                <div class="card sub-card">
                                    <div class="card-header">
                                        <h2>SKILLS</h2>
                                    </div>
                                    <div class="card-body sub-card inner-card">
                                        <div class="list-group">
                                            <div class="list-group-item list-group-item-action">
                                                <div class="d-flex w-100 justify-content-between">
                                                    <h5 class="mb-0">Total Level</h5>
                                                    <p class="mb-0 adventure-log-item-time">
                                                        {{ playerInfo.totalSkill|number_format }}
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="list-group-item list-group-item-action">
                                                <div class="d-flex w-100 justify-content-between">
                                                    <h5 class="mb-0">Total XP</h5>
                                                    <p class="mb-0 adventure-log-item-time">
                                                        {{ playerInfo.totalXp|number_format }}
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="list-group-item list-group-item-action">
                                                <div class="d-flex w-100 justify-content-between">
                                                    <h5 class="mb-0">Rank</h5>
                                                    <p class="mb-0 adventure-log-item-time">
                                                        {{ playerInfo.rank|number_format }}
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="list-group-item list-group-item-action">
                                                <div class="d-flex w-100 justify-content-between">
                                                    <h5 class="mb-0">Combat Level</h5>
                                                    <p class="mb-0 adventure-log-item-time">
                                                        {{ playerInfo.combatLevel|number_format }}
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="list-group-item list-group-item-action skills-container-container">
                                                <div class="d-flex w-100 justify-content-between skills-container">
                                                    {% for skill in playerInfo.skillValues %}
                                                        <div class="skill-icon-container"
                                                             title="{{ skill.id.name }} {{ skill.xp|number_format }} XP">
                                                            <img src="https://runescape.wiki/images/{{ skill.id.name }}-icon.png"
                                                                 class="skill-icon" alt="{{ skill.id.name }}"
                                                                 title="{{ skill.id.name }} {{ skill.xp|number_format }} XP">
                                                            <span title="{{ skill.id.name }} {{ skill.xp|number_format }} XP">
                                                                {{ skill.level }}
                                                            </span>
                                                            <br>
                                                            <span title="{{ skill.id.name }} {{ skill.xp|number_format }} XP"
                                                                  class="skill-xp">
                                                                {{ skill.xp|number_format }} XP
                                                            </span>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                            <div class="list-group-item list-group-item-action adventure-log-item custom-card-footer">
                                                <div class="d-flex w-100 justify-content-end">
                                                    <a href="{{ path('index') }}" class="mb-0 card-footer-link">
                                                        All levels
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        {#                                        <p class="card-text">{{ render_chart(chart) }}</p> #}
                                    </div>
                                </div>
                            </div>

                            <!-- Right Col -->
                            <div class="col-4 p2">
                                <!-- Clan Info -->
                                <div class="row">
                                    <div class="col-12 p-2">
                                        <div class="card sub-card">
                                            <div class="card-header clan-card-header">
                                                <a href="https://services.runescape.com/m=clan-home/clan/{{ playerInfo.clan }}"
                                                   target="_blank">
                                                    <img src="https://secure.runescape.com/m=avatar-rs/{{ playerInfo.name }}/ownclan.png"
                                                         alt="{{ playerInfo.clan }} avatar"
                                                         title="{{ playerInfo.clan }} avatar"
                                                         class="clan-banner">
                                                </a>
                                                <br>
                                                <a href="https://services.runescape.com/m=clan-home/clan/{{ playerInfo.clan }}"
                                                   class="clan-name-link" target="_blank">
                                                    <h2 class="clan-name">{{ playerInfo.clan }}</h2>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Quests -->
                                <div class="row">
                                    <div class="col-12 p-2">
                                        <div class="card sub-card">
                                            <div class="card-header">
                                                <h2>QUESTS</h2>
                                            </div>
                                            <div class="card-body sub-card inner-card">
                                                <div class="list-group">
                                                    <div class="list-group-item list-group-item-action">
                                                        <div class="d-flex w-100 justify-content-between quest-chart">
                                                            {{ render_chart(chart) }}
                                                        </div>
                                                    </div>
                                                    <div class="list-group-item list-group-item-action adventure-log-item custom-card-footer">
                                                        <div class="d-flex w-100 justify-content-end">
                                                            <a href="{{ path('index') }}" class="mb-0 card-footer-link">
                                                                All quests
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                                {#                                        <p class="card-text">{{ render_chart(chart) }}</p> #}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}